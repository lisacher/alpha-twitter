(function(e){function t(t){for(var n,r,c=t[0],o=t[1],u=t[2],l=0,d=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s={app:0},i=[];function c(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-2d0e5e97":"9250e987","chunk-4d75cf06":"86eb48e9","chunk-532962f0":"4827c5be","chunk-695ac44c":"7fc7a22e","chunk-6fc52cca":"cbc1c495","chunk-79394af2":"03f1bea8","chunk-9f8eee5e":"ec31648c","chunk-a51be666":"13002e2b","chunk-bc393ae4":"3f850ccd","chunk-be823c30":"e7a5fc51","chunk-7479dd90":"e6f661f3","chunk-7a4c62ea":"fcfc636b","chunk-efe2c6b2":"2c521de0","chunk-da970e92":"0e9f83f6"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a={"chunk-4d75cf06":1,"chunk-532962f0":1,"chunk-695ac44c":1,"chunk-6fc52cca":1,"chunk-79394af2":1,"chunk-9f8eee5e":1,"chunk-a51be666":1,"chunk-bc393ae4":1,"chunk-be823c30":1,"chunk-7479dd90":1,"chunk-7a4c62ea":1,"chunk-efe2c6b2":1,"chunk-da970e92":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-2d0e5e97":"31d6cfe0","chunk-4d75cf06":"aef22569","chunk-532962f0":"fc0532da","chunk-695ac44c":"193e60f9","chunk-6fc52cca":"9f73995b","chunk-79394af2":"ee3a9e46","chunk-9f8eee5e":"0dfaedaa","chunk-a51be666":"ea31b75b","chunk-bc393ae4":"d2ef64af","chunk-be823c30":"4c9da0a3","chunk-7479dd90":"84c3379c","chunk-7a4c62ea":"7f3cbde0","chunk-efe2c6b2":"ae6595be","chunk-da970e92":"f85bbda7"}[e]+".css",s=o.p+n,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===s))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===n||l===s)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete r[e],f.parentNode.removeChild(f),a(i)},f.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){r[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,a[1](d)}s[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/alpha-twitter/",o.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"08c7":function(e,t,a){},1195:function(e,t,a){e.exports=a.p+"img/avatar.912c6d60.png"},"12ab":function(e,t,a){},1374:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit(t)}}},[a("div",{staticClass:"row"},[a("label",{attrs:{for:"account"}},[e._v("帳號"),a("span",{staticClass:"note"},[e._v(e._s(e.form.account.length)+" / 50")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.account,expression:"form.account"}],attrs:{id:"account",name:"account",type:"text",required:"",maxlength:"50"},domProps:{value:e.form.account},on:{input:function(t){t.target.composing||e.$set(e.form,"account",t.target.value)}}})]),a("div",{staticClass:"row"},[a("label",{attrs:{for:"name"}},[e._v("名稱"),a("span",{staticClass:"note"},[e._v(e._s(e.form.name.length)+" / 50")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{id:"name",name:"name",type:"text",maxlength:"50",required:""},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),a("div",{staticClass:"row"},[e._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],attrs:{id:"email",name:"email",type:"email",required:""},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),a("div",{staticClass:"row"},[e._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{id:"password",name:"password",type:"password",required:"",maxLength:"15"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),a("div",{staticClass:"row"},[e._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.confirmPassword,expression:"form.confirmPassword"}],attrs:{id:"confirmPassword",name:"confirmPassword",type:"password",required:"",maxLength:"15"},domProps:{value:e.form.confirmPassword},on:{input:function(t){t.target.composing||e.$set(e.form,"confirmPassword",t.target.value)}}})]),e.isSignUp?[e._m(3),a("div",{staticClass:"row"},[a("button",{staticClass:"btn cancel",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.backToLogin.apply(null,arguments)}}},[e._v(" 取消 ")])])]:[e._m(4)]],2)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"email"}},[e._v("Email"),a("span",{staticClass:"note ml-5"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"password"}},[e._v("密碼"),a("span",{staticClass:"password"},[e._v("*密碼長度需介於 4 到 15 字元")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"confirmPassword"}},[e._v("密碼確認"),a("span",{staticClass:"passwordCheck"},[e._v("*密碼長度需介於 4 到 15 字元")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mt-4"},[a("button",{staticClass:"btn submit",attrs:{type:"submit"}},[e._v("註冊")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("button",{staticClass:"btn update",attrs:{type:"submit"}}),a("button",{staticClass:"btn update"},[e._v("儲存")])])}],s=a("1da1"),i=a("5530"),c=(a("96cf"),a("b0c0"),a("7696")),o=a("4cce"),u=a("2fa3"),l=a("2f62"),d={name:"RegistEditForm",props:{isSignUp:{type:Boolean,default:!0}},data:function(){return{form:{account:"",name:"",email:"",password:"",confirmPassword:""},isSaved:!0,userChanged:!1}},created:function(){this.fetchCurrentUser(this.currentUser)},watch:{currentUser:function(e){this.fetchCurrentUser(e)},form:{handler:function(){if(!this.userChanged)return this.userChanged=!0;this.isSaved=!1}}},computed:Object(i["a"])({},Object(l["b"])(["currentUser"])),methods:{fetchCurrentUser:function(e){var t=e.id,a=e.name,n=e.email,r=e.account;this.form=Object(i["a"])(Object(i["a"])({},this.form),{},{id:t,name:a,email:n,account:r})},backToLogin:function(){this.$router.push("/login")},formCheck:function(){var e=!1;return this.form.account?this.form.name?this.form.email?this.form.password?this.form.password.length>15||this.form.password.length<4?(u["a"].fire({icon:"info",title:"密碼長度需介於 4 到 15 字元！"}),e):this.form.confirmPassword?this.form.password===this.form.confirmPassword||(u["a"].fire({icon:"error",title:"密碼不相符！"}),e):(u["a"].fire({icon:"info",title:"請填寫密碼確認！"}),e):(u["a"].fire({icon:"info",title:"請填寫密碼！"}),e):(u["a"].fire({icon:"info",title:"請填寫 Email！"}),e):(u["a"].fire({icon:"info",title:"請填寫名稱！"}),e):(u["a"].fire({icon:"info",title:"請填寫帳號！"}),e)},handleSubmit:function(){this.isSignUp?this.handleRegistSubmit():this.handleSaveSetting()},handleRegistSubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.form,n=e.formCheck(),n){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,c["a"].signUp(a);case 7:if(r=t.sent,s=r.data,"success"===s.status){t.next=11;break}throw new Error(s);case 11:u["a"].fire({icon:"success",title:"註冊成功！"}),e.$router.push("/login"),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),u["a"].fire({icon:"error",title:t.t0.response.data.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},handleSaveSetting:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.form,n=e.formCheck(),n){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,o["a"].updateInfo({userId:e.currentUserid,formData:a});case 7:if(r=t.sent,s=r.data,"此帳號已被使用"!==s.message){t.next=12;break}return u["a"].fire({icon:"error",title:"此帳號已被使用，請改試其他帳號"}),t.abrupt("return");case 12:if("此信箱已被使用"!==s.message){t.next=15;break}return u["a"].fire({icon:"error",title:"此信箱已被使用，請改試其他帳號"}),t.abrupt("return");case 15:u["a"].fire({icon:"success",title:"資料修改成功！"}),e.isSaved=!0,e.userChanged=!0,e.form.password="",e.form.confirmPassword="",e.$store.commit("setCurrentUser",Object(i["a"])(Object(i["a"])({},e.currentUser),s[0])),t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](0),u["a"].fire({icon:"error",title:"無法儲存使用者資訊，請稍候再試！"});case 26:case"end":return t.stop()}}),t,null,[[0,23]])})))()}}},f=d,m=(a("4ac0"),a("2877")),p=Object(m["a"])(f,n,r,!1,null,"5b66526b",null);t["a"]=p.exports},"178b":function(e,t,a){},2375:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loadingio-spinner-spinner-3998n36ox9f"},[a("div",{staticClass:"ldio-4jdtjhjklh"},[a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div")])])}],s={name:"Spinner"},i=s,c=(a("e46d"),a("2877")),o=Object(c["a"])(i,n,r,!1,null,"04b4a9e4",null);t["a"]=o.exports},2708:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var n=a("c1df"),r=a.n(n),s={filters:{fromNow:function(e){return r.a.locale("zh-tw"),e?r()(e).fromNow():"-"}}},i={filters:{exactDate:function(e){return r.a.locale("zh-tw"),e?r()(e).format("a h:mm ⋅ YYYY年M月Do"):"-"}}},c={filters:{emptyImage:function(e){return e||a("1195")},emptyCover:function(e){return e||a("660d")}}},o={filters:{fromNow:function(e){r.a.locale("zh-tw");var t=new Date,a=new Date(e),n=31536e6;return e?t.getTime()-a.getTime()<864e5?r()(e).fromNow():t.getTime()-a.getTime()>n?"1 年以前":r()(e).format("M月D日"):"-"}}}},"2d2c":function(e,t,a){"use strict";a("178b")},"2fa3":function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return l}));a("d3b7");var n=a("bc3a"),r=a.n(n),s=a("3d20"),i=a.n(s),c="https://twitter-api-for-2021.herokuapp.com/api",o=r.a.create({baseURL:c});o.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var u=o,l=i.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})},"335f":function(e,t,a){},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="4678"},"471f":function(e,t,a){},"4ac0":function(e,t,a){"use strict";a("8b48")},"4b4d":function(e,t,a){"use strict";a("8e0d")},"4cce":function(e,t,a){"use strict";var n=a("2fa3");t["a"]={getUser:function(e){var t=e.userId;return n["b"].get("/users/".concat(t))},getUserFollowings:function(e){var t=e.userId;return n["b"].get("/users/".concat(t,"/followings"))},getUserFollowers:function(e){var t=e.userId;return n["b"].get("/users/".concat(t,"/followers"))},getRecFollowers:function(){return n["b"].get("/followships")},followUser:function(e){var t=e.userId;return n["b"].post("/followships",{id:t})},unfollowUser:function(e){var t=e.userId;return n["b"].delete("/followships/".concat(t))},update:function(e){var t=e.userId,a=e.formData;return n["b"].put("/users/".concat(t),a)},updateInfo:function(e){var t=e.userId,a=e.formData;return n["b"].put("/users/".concat(t,"/info"),a)},getAdminUsers:function(){return n["b"].get("/admin/users")}}},"4df0":function(e,t,a){"use strict";a("c8f4")},"51b8":function(e,t,a){"use strict";a("471f")},5620:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],i=(a("7b17"),a("ab8b"),{name:"App"}),c=i,o=a("2877"),u=Object(o["a"])(c,r,s,!1,null,null,null),l=u.exports,d=a("1da1"),f=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("caad"),a("b0c0"),a("2532"),a("8c4f")),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container main-container"},[a("div",{staticClass:"row"},[a("SideNavBar",{staticClass:"col-sm-3",on:{"after-create-tweet":e.afterCreateTweet}}),a("div",{staticClass:"col-sm-5 p-0 border main-component"},[a("TopNavBar",{attrs:{msg:"首頁",show:!1}}),a("div",{staticClass:"tweets-container"},[a("CreateTweet",{attrs:{"current-user":e.currentUser},on:{"after-create-tweet":e.afterCreateTweet}}),e.isLoading?a("Spinner"):e._l(e.tweets,(function(t){return a("TweetsCard",{key:t.id,attrs:{"initial-data":t},on:{"after-click-modal":e.afterClickModal}})})),a("TweetReplyModal",{attrs:{"target-tweet":e.modalContent},on:{"change-reply-count":e.changeReplyCount}})],2)],1),a("div",{staticClass:"col-sm-4"},[a("RecFollowingList")],1)],1)])},p=[],b=a("5530"),v=(a("4e82"),a("a4d3"),a("e01a"),a("d81d"),a("56e4")),h=a("f250"),g=a("ab4f"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"border"},[n("form",{staticClass:"tweet-form border-top",class:{warningBackground:e.description.length>140},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"d-flex"},[n("img",{attrs:{src:a("bca0"),alt:""}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"flex-grow-1 pe-2",class:{warningBackground:e.description.length>140},attrs:{name:"text",id:"text",rows:"3",placeholder:e._f("adjustAddTweetPlaceholder")(e.currentUser.name),maxlength:"140",required:""},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),n("div",{staticClass:"submit d-flex mt-3 mb-2 pe-3"},[e.description.length>140?n("div",{staticClass:"warning-content"},[e._v(" 字數請勿超過140字！ ")]):e._e(),n("button",{staticClass:"btn btn-primary ms-auto",attrs:{type:"submit",disabled:!e.description||e.description.length>140||e.status.isProcessing}},[e._v(" 推文 ")])])])])},k=[],C=(a("498a"),a("6783")),j=a("2fa3"),x={name:"CreateTweet",props:{currentUser:{type:Object,required:!0}},data:function(){return{description:"",comments:[],status:{isProcessing:!1}}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.status.isProcessing=!0,e.description.trim()){t.next=7;break}return j["a"].fire({icon:"error",title:"請填寫推文內容！"}),e.description="",e.status.isProcessing=!1,t.abrupt("return");case 7:if(!(e.description.length>140)){t.next=11;break}return j["a"].fire({icon:"warning",title:"推文內容請勿超過140字"}),e.status.isProcessing=!1,t.abrupt("return");case 11:return t.next=13,C["a"].createTweet({User:e.currentUser,description:e.description});case 13:if(a=t.sent,n=a.data,"success"===n.status){t.next=17;break}throw new Error(n.message);case 17:e.$emit("after-create-tweet",{description:e.description,id:n.message.id}),j["a"].fire({icon:"success",title:"推文成功！"}),e.description="",e.status.isProcessing=!1,t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](0),e.status.isProcessing=!1,j["a"].fire({icon:"error",title:"無法推文，請稍後再試"});case 27:case"end":return t.stop()}}),t,null,[[0,23]])})))()}},filters:{adjustAddTweetPlaceholder:function(e){return"".concat(e,"，有什麼新鮮事呢？")}}},y=x,_=(a("51b8"),Object(o["a"])(y,w,k,!1,null,"25f4ea79",null)),A=_.exports,U=a("58aa"),E=a("811a"),R=a("2375"),T=a("2f62"),O={name:"main-tweets",components:{SideNavBar:v["a"],RecFollowingList:h["a"],TopNavBar:g["a"],CreateTweet:A,TweetsCard:U["a"],TweetReplyModal:E["a"],Spinner:R["a"]},data:function(){return{tweets:[],modalContent:{},isLoading:!0}},created:function(){this.fetchTweets()},computed:Object(b["a"])({},Object(T["b"])(["currentUser"])),methods:{fetchTweets:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C["a"].getTweets();case 3:a=t.sent,n=a.data,e.tweets=n,e.tweets.sort((function(e,t){var a=new Date(e.createdAt),n=new Date(t.createdAt);return n.getTime()-a.getTime()})),e.isLoading=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.isLoading=!1,j["a"].fire({icon:"error",title:"目前無法取得推文資料，請稍後再試"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},afterCreateTweet:function(e){var t=e.description,a=e.id;this.tweets.unshift({id:a,User:{id:this.currentUser.id,name:this.currentUser.name,account:this.currentUser.account,avatar:this.currentUser.avatar},description:t,createdAt:new Date,isLiked:!1,totalLikes:0,totalReplies:0})},afterClickModal:function(e){this.modalContent=Object(b["a"])(Object(b["a"])({},this.modalContent),e)},changeReplyCount:function(e){this.tweets.map((function(t){t.id===e&&(t.totalReplies+=1)}))}}},P=O,I=(a("cb4e"),Object(o["a"])(P,m,p,!1,null,"68bb1770",null)),S=I.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("LoginForm")],1)},D=[],N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[e._m(0),e._m(1),a("div",{staticClass:"row"},[a("label",{attrs:{for:"account"}},[e._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],attrs:{id:"account",name:"account",type:"text",required:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),a("div",{staticClass:"row"},[a("label",{attrs:{for:"password"}},[e._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._m(2),a("div",{staticClass:"row link-btns-container"},[a("div",{staticClass:"link-btns"},[a("router-link",{staticClass:"routerLink",attrs:{to:"/register"}},[e._v("註冊 Alphitter")]),a("span",[e._v(" · ")]),a("router-link",{staticClass:"routerLink",attrs:{to:"/admin"}},[e._v("後台登入")])],1)])])},B=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("img",{attrs:{src:a("bca0"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("h1",[e._v("登入 Alphitter")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mt-4"},[a("button",{staticClass:"btn login",attrs:{type:"submit"}},[e._v("登入")])])}],F=a("7696"),M={name:"UserLogin",data:function(){return{account:"",password:""}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.account&&e.password){t.next=4;break}return j["a"].fire({icon:"warning",title:"請輸入帳號和密碼"}),t.abrupt("return");case 4:return t.next=6,F["a"].signIn({account:e.account,password:e.password});case 6:if(a=t.sent,n=a.data,"success"===n.status){t.next=10;break}throw new Error(n.message);case 10:localStorage.setItem("token",n.token),e.fetchCurrentUser(),e.$router.push("/tweets"),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),j["a"].fire({icon:"error",title:t.t0.response.data.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},fetchCurrentUser:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].getCurrentUser();case 3:a=t.sent,n=a.data,e.$store.commit("setCurrentUser",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),j["a"].fire({icon:"error",title:"無法取得資料，請稍候再試。"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},z=M,q=(a("4df0"),Object(o["a"])(z,N,B,!1,null,"75e5c61c",null)),$=q.exports,H={name:"UserLogin",components:{LoginForm:$}},Q=H,Y=Object(o["a"])(Q,L,D,!1,null,null,null),G=Y.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e._m(0),e._m(1),a("RegistEditForm",{attrs:{isSignUp:!0}})],1)},K=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("img",{attrs:{src:a("bca0"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("h1",[e._v("建立你的帳號")])])}],V=a("1374"),W={name:"Register",components:{RegistEditForm:V["a"]},data:function(){return{isSignUp:!0}}},Z=W,X=(a("4b4d"),Object(o["a"])(Z,J,K,!1,null,"64ba0342",null)),ee=X.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[e._m(0),e._m(1),a("div",{staticClass:"row"},[a("label",{attrs:{for:"account"}},[e._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],attrs:{id:"account",name:"account",type:"text",required:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),a("div",{staticClass:"row"},[a("label",{attrs:{for:"password"}},[e._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._m(2),a("div",{staticClass:"row link-btns-container"},[a("div",{staticClass:"link-btns login"},[a("p",[a("router-link",{staticClass:"routerLink",attrs:{to:"/login"}},[e._v("前台登入")])],1)])])])},ae=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("img",{attrs:{src:a("bca0"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("h1",[e._v("後台登入")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mt-4"},[a("button",{staticClass:"btn signin",attrs:{type:"submit"}},[e._v("登入")])])}],ne={name:"AdminLogin",data:function(){return{account:"",password:""}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.account&&e.password){t.next=4;break}return j["a"].fire({icon:"warning",title:"請輸入帳號和密碼"}),t.abrupt("return");case 4:return t.next=6,F["a"].adminSignin({account:e.account,password:e.password});case 6:if(a=t.sent,n=a.data,"success"===n.status){t.next=10;break}throw new Error(n.message);case 10:localStorage.setItem("token",n.token),e.$store.commit("setCurrentUser",n.user),e.$router.push("/admin/tweets"),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),j["a"].fire({icon:"error",title:t.t0.response.data.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()}}},re=ne,se=(a("99d3"),Object(o["a"])(re,te,ae,!1,null,"87a6be6a",null)),ie=se.exports;n["a"].use(T["a"]);var ce=new T["a"].Store({state:{currentUser:{id:-1,name:"",account:"",email:"",avatar:"",role:""},isAuthenticated:!1,token:""},mutations:{setCurrentUser:function(e,t){e.currentUser=Object(b["a"])(Object(b["a"])({},e.currentUser),t),e.isAuthenticated=!0,e.token=localStorage.getItem("token")},revokeAuthentication:function(e){e.currentUser={id:-1,name:"",account:"",email:"",avatar:"",role:""},e.isAuthenticated=!1,e.token="",localStorage.removeItem("token")}},actions:{fetchCurrentUser:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,c,o,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,t.next=4,F["a"].getCurrentUser();case 4:if(n=t.sent,r=n.data,"error"!==r.status){t.next=8;break}throw new Error(r.message);case 8:return s=r.id,i=r.name,c=r.account,o=r.email,u=r.avatar,l=r.role,a("setCurrentUser",{id:s,name:i,account:c,email:o,avatar:u,role:l}),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t["catch"](1),a("revokeAuthentication"),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()}},modules:{}});n["a"].use(f["a"]);var oe=function(e,t,a){var n=ce.state.currentUser;if(n&&"user"===n.role)return j["a"].fire({icon:"error",title:"無法訪問該頁面。"}),void a("/tweets");a()},ue=function(e,t,a){var n=ce.state.currentUser;if(n&&"admin"===n.role)return j["a"].fire({icon:"error",title:"無法訪問該頁面。"}),void a("/admin/tweets");a()},le=[{path:"/",name:"root",redirect:"/login"},{path:"/login",name:"login",component:G},{path:"/register",name:"register",component:ee},{path:"/admin",name:"admin-login",component:ie},{path:"/setting",name:"user-setting",component:function(){return a.e("chunk-4d75cf06").then(a.bind(null,"ce99"))},beforeEnter:ue},{path:"/tweets",name:"tweets",component:S,beforeEnter:ue},{path:"/users/:id",name:"user",redirect:"/users/:id/tweets",beforeEnter:ue},{path:"/users/:id/tweets",name:"user-tweets",component:function(){return Promise.all([a.e("chunk-be823c30"),a.e("chunk-7479dd90")]).then(a.bind(null,"5a38"))},beforeEnter:ue},{path:"/users/:id/reply",name:"user-reply",component:function(){return Promise.all([a.e("chunk-be823c30"),a.e("chunk-efe2c6b2")]).then(a.bind(null,"236c"))},beforeEnter:ue},{path:"/users/:id/likes",name:"user-likes",component:function(){return Promise.all([a.e("chunk-be823c30"),a.e("chunk-7a4c62ea")]).then(a.bind(null,"5c7c"))},beforeEnter:ue},{path:"/users/:id/followers",name:"user-followers",component:function(){return a.e("chunk-9f8eee5e").then(a.bind(null,"8fa4"))},beforeEnter:ue},{path:"/users/:id/followings",name:"user-followings",component:function(){return a.e("chunk-6fc52cca").then(a.bind(null,"23ae"))},beforeEnter:ue},{path:"/tweet/:id",name:"tweet",component:function(){return a.e("chunk-da970e92").then(a.bind(null,"6f1a"))},beforeEnter:ue},{path:"/notification",name:"notification",component:function(){return a.e("chunk-79394af2").then(a.bind(null,"109a"))},beforeEnter:ue},{path:"/chat/:id",name:"chat",component:function(){return a.e("chunk-bc393ae4").then(a.bind(null,"293a"))},beforeEnter:ue},{path:"/message",name:"private-message",component:function(){return a.e("chunk-532962f0").then(a.bind(null,"e39f"))},beforeEnter:ue},{path:"/admin/tweets",name:"admin-tweets",component:function(){return a.e("chunk-695ac44c").then(a.bind(null,"b8d0"))},beforeEnter:oe},{path:"/admin/users",name:"admin-twitterers",component:function(){return a.e("chunk-a51be666").then(a.bind(null,"80a2"))},beforeEnter:oe},{path:"*",name:"not-found",component:function(){return a.e("chunk-2d0e5e97").then(a.bind(null,"9703"))}}],de=new f["a"]({linkExactActiveClass:"active",linkActiveClass:"part-active",routes:le});de.beforeEach(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,s,i,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("token"),s=ce.state.token,i=ce.state.currentUser.role,c=ce.state.isAuthenticated,!r||r===s){e.next=8;break}return e.next=7,ce.dispatch("fetchCurrentUser");case 7:c=e.sent;case 8:if(o=["login","register","admin-login"],c||o.includes(t.name)){e.next=13;break}return n("/login"),j["a"].fire({icon:"error",title:"請先完成登入！"}),e.abrupt("return");case 13:if(!c||!o.includes(t.name)){e.next=24;break}if("user"!==i){e.next=20;break}return n("/tweets"),j["a"].fire({icon:"error",title:"已完成登入。要切換使用者或註冊，請先登出。"}),e.abrupt("return");case 20:if("admin"!==i){e.next=24;break}return j["a"].fire({icon:"error",title:"已完成登入。要登入前台，請先登出。"}),n("/admin/tweets"),e.abrupt("return");case 24:n();case 25:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}());var fe=de;a("12ab");n["a"].config.productionTip=!1,new n["a"]({router:fe,store:ce,render:function(e){return e(l)}}).$mount("#app")},"56e4":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav",{staticClass:"container"},[n("div",{staticClass:"nav-logo mb-4"},[n("router-link",{attrs:{to:"/tweets"}},[n("img",{attrs:{src:a("bca0"),alt:""}})])],1),e.isAdmin?n("div",{staticClass:"nav-list"},[n("ul",{staticClass:"nav flex-column me-3 pe-4"},[n("li",{staticClass:"nav-item mb-4"},[n("router-link",{staticClass:"nav-link d-flex",attrs:{to:"/admin/tweets"}},[n("div",{staticClass:"home-image"}),n("div",{staticClass:"nav-item-text"},[e._v("推文清單")])])],1),n("li",{staticClass:"nav-item mb-4"},[n("router-link",{staticClass:"nav-link d-flex",attrs:{to:"/admin/users"}},[n("div",{staticClass:"profile-image"}),n("div",{staticClass:"nav-item-text"},[e._v("使用者列表")])])],1),e._m(1)])]):n("div",{staticClass:"nav-list"},[n("ul",{staticClass:"nav flex-column me-3 pe-4"},[n("li",{staticClass:"nav-item mb-4"},[n("router-link",{staticClass:"nav-link d-flex",attrs:{to:"/tweets"}},[n("div",{staticClass:"home-image"}),n("div",{staticClass:"nav-item-text"},[e._v("首頁")])])],1),n("li",{staticClass:"nav-item mb-4"},[n("router-link",{staticClass:"nav-link d-flex",attrs:{to:{name:"chat",params:{id:e.currentUser.id}}}},[n("div",{staticClass:"message-image"}),n("div",{staticClass:"nav-item-text"},[e._v("公開聊天室")])])],1),n("li",{staticClass:"nav-item mb-4"},[n("router-link",{staticClass:"nav-link d-flex",attrs:{to:{name:"user",params:{id:e.currentUser.id}}}},[n("div",{staticClass:"profile-image"}),n("div",{staticClass:"nav-item-text"},[e._v("個人資料")])])],1),n("li",{staticClass:"nav-item mb-4"},[n("router-link",{staticClass:"nav-link d-flex",attrs:{to:"/setting"}},[n("div",{staticClass:"setting-image"}),n("div",{staticClass:"nav-item-text"},[e._v("設定")])])],1),n("li",{staticClass:"nav-item mt-2"},[n("CreatedTweetModal",{attrs:{"current-user":e.currentUser},on:{"after-create-tweet":e.afterCreateTweet}})],1),e._m(0)])])]),n("div",{staticClass:"modal fade",attrs:{id:"logoutModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog modal-sm"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-body text-center"},[e._v("您確定要登出嗎？")]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e._v(" 取消 ")]),n("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#logoutModal"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.logOut()}}},[e._v(" 登出 ")])])])])])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"nav-item mb-3 nav-item-logout"},[a("button",{staticClass:"btn nav-link d-flex",attrs:{"data-bs-toggle":"modal","data-bs-target":"#logoutModal"}},[a("div",{staticClass:"logout-image"}),a("div",{staticClass:"nav-item-text"},[e._v("登出")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"nav-item mb-3 nav-item-logout"},[a("button",{staticClass:"btn nav-link d-flex",attrs:{"data-bs-toggle":"modal","data-bs-target":"#logoutModal"}},[a("div",{staticClass:"logout-image"}),a("div",{staticClass:"nav-item-text"},[e._v("登出")])])])}],s=a("5530"),i=(a("a4d3"),a("e01a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-grid gap-2"},[n("button",{staticClass:"btn tweet-button",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#tweetModal"}},[e._v(" 推文 ")]),n("div",{staticClass:"modal fade",attrs:{id:"tweetModal",tabindex:"-1","aria-labelledby":"tweet-modal","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header py-2"},[n("button",{staticClass:"btn close-btn p-0",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleCancel.apply(null,arguments)}}},[n("img",{attrs:{src:a("71e1"),alt:""}})])]),n("form",{staticClass:"modal-body",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"d-flex"},[n("img",{attrs:{src:a("bca0"),alt:""}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"flex-grow-1 pe-2",attrs:{name:"description",id:"descriptionModal",rows:"6",placeholder:e._f("adjustAddTweetPlaceholder")(e.currentUser.name),maxlength:"140",required:""},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),n("div",{staticClass:"submit d-flex mt-3 mb-2 pe-3"},[e.description.length>140?n("div",{staticClass:"warning-content"},[e._v(" 字數請勿超過140字！ ")]):e._e(),n("button",{staticClass:"btn btn-primary ms-auto",attrs:{type:"submit",disabled:!e.description||e.description.length>140||e.status.isProcessing}},[e._v(" 推文 ")])])])])])])])}),c=[],o=a("1da1"),u=(a("96cf"),a("498a"),a("2fa3")),l=a("6783"),d={name:"CreatedTweetModal",props:{currentUser:{type:Object,required:!0}},data:function(){return{description:"",status:{isProcessing:!1}}},methods:{handleSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.status.isProcessing=!0,e.description.trim()){t.next=7;break}return u["a"].fire({icon:"error",title:"請填寫推文內容！"}),e.description="",e.status.isProcessing=!1,t.abrupt("return");case 7:if(!(e.description.length>140)){t.next=11;break}return u["a"].fire({icon:"warning",title:"推文內容請勿超過140字"}),e.status.isProcessing=!1,t.abrupt("return");case 11:return t.next=13,l["a"].createTweet({User:e.currentUser,description:e.description});case 13:if(a=t.sent,n=a.data,"success"===n.status){t.next=17;break}throw new Error(n.message);case 17:e.$emit("after-create-tweet",{description:e.description,id:n.message.id}),u["a"].fire({icon:"success",title:"推文成功！"}),e.description="",e.status.isProcessing=!1,t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](0),e.status.isProcessing=!1,u["a"].fire({icon:"error",title:"無法推文，請稍後再試"});case 27:case"end":return t.stop()}}),t,null,[[0,23]])})))()},handleCancel:function(){this.description=""}},filters:{adjustAddTweetPlaceholder:function(e){return"".concat(e,"，有什麼新鮮事呢？")}}},f=d,m=(a("c747"),a("2877")),p=Object(m["a"])(f,i,c,!1,null,"3e80d58c",null),b=p.exports,v=a("2f62"),h={name:"SideNavBar",props:{isAdmin:{type:Boolean,default:!1}},data:function(){return{comments:[]}},computed:Object(s["a"])({},Object(v["b"])(["currentUser"])),components:{CreatedTweetModal:b},methods:{afterCreateTweet:function(e){var t=e.description,a=e.id;this.$emit("after-create-tweet",{description:t,id:a})},logOut:function(){this.$store.commit("revokeAuthentication"),this.isAdmin?this.$router.push("/admin"):this.$router.push("/login")}}},g=h,w=(a("db75"),Object(m["a"])(g,n,r,!1,null,"41e8b430",null));t["a"]=w.exports},"58aa":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex border tweet-card"},[a("div",{staticClass:"img-container m-3"},[a("router-link",{attrs:{to:{name:"user-tweets",params:{id:e.data.User.id}}}},[a("img",{attrs:{src:e._f("emptyImage")(e.data.User.avatar),alt:""}})])],1),a("div",{staticClass:"text-container d-flex flex-column mt-2 flex-grow-1"},[a("div",{staticClass:"header"},[a("div",{staticClass:"name d-inline-block pe-2 fw-bold"},[e._v(e._s(e.data.User.name))]),a("div",{staticClass:"account d-inline-block"},[e._v(e._s(e.data.User.account))]),a("div",{staticClass:"createdAt d-inline-block"},[e._v(" ・"+e._s(e._f("fromNow")(e.data.createdAt))+" ")])]),e.replyTweet?a("router-link",{staticClass:"tweet-link",attrs:{to:{name:"tweet",params:{id:e.replyTweet.id?e.replyTweet.id:e.replyTweet}}}},[a("div",{staticClass:"body"},[a("div",{staticClass:"text mb-2"},[a("p",{staticClass:"reply-content py-1"},[e._v(" 回覆 "),e.replyTweet.User?a("router-link",{staticClass:"tweet-link",attrs:{to:{name:"user-tweets",params:{id:e.replyTweet.User.id}}}},[a("span",[e._v(e._s(e.replyTweet.User.account))])]):e._e()],1),e._v(" "+e._s(e.data.content)+" ")])])]):a("router-link",{staticClass:"tweet-link flex-grow-1",attrs:{to:{name:"tweet",params:{id:e.data.id}}}},[a("div",{staticClass:"body me-3"},[a("div",{staticClass:"text"},[e._v(" "+e._s(e.data.description)+" ")])])]),e.replyTweet?a("div",[e.data.id?a("div",{staticClass:"liked d-flex align-items-center reply-tweet-like",class:{activeLiked:1===e.data.isLiked}},[a("button",{staticClass:"btn liked-img",attrs:{disabled:e.status.isProcessing},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleLiked(e.data.id)}}})]):e._e()]):a("div",{staticClass:"footer d-flex my-2"},[a("div",{staticClass:"comment d-flex align-items-center me-5"},[a("div",{staticClass:"btn comment-img",attrs:{"data-bs-toggle":"modal","data-bs-target":"#tweetReplyModal"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.clickModalButton(e.data)}}}),a("div",{staticClass:"comments-count"},[e._v(e._s(e.data.totalReplies))])]),a("div",{staticClass:"liked d-flex align-items-center",class:{activeLiked:1===e.data.isLiked}},[a("button",{staticClass:"btn liked-img",attrs:{disabled:e.status.isProcessing},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleLiked(e.data.id)}}}),a("div",{staticClass:"likes-count"},[e._v(e._s(e.data.totalLikes))])])])],1)])},r=[],s=a("1da1"),i=a("5530"),c=(a("96cf"),a("a9e3"),a("2708")),o=a("6783"),u=a("2fa3"),l={name:"TweetsCard",mixins:[c["a"],c["b"]],props:{initialData:{type:Object,required:!0},replyTweet:{type:[Object,Number],default:null}},data:function(){return{data:this.initialData,status:{isProcessing:!1,isLoading:!1}}},watch:{initialData:{handler:function(e){this.data=Object(i["a"])(Object(i["a"])({},this.data),e)},deep:!0}},methods:{toggleLiked:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,c,l,d,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.status.isProcessing=!0,t.replyTweet){a.next=24;break}if(0!==t.data.isLiked){a.next=15;break}return a.next=6,o["a"].likeTweet({tweetId:e});case 6:if(n=a.sent,r=n.data,"success"===r.status){a.next=10;break}throw new Error(r.message);case 10:t.data.totalLikes+=1,t.data.isLiked=1,u["a"].fire({icon:"success",title:r.message}),a.next=24;break;case 15:return a.next=17,o["a"].unlikeTweet({tweetId:e});case 17:if(s=a.sent,i=s.data,"success"===i.status){a.next=21;break}throw new Error(i.message);case 21:t.data.totalLikes-=1,t.data.isLiked=0,u["a"].fire({icon:"success",title:i.message});case 24:if(!t.replyTweet){a.next=46;break}if(0!==t.data.isLiked){a.next=37;break}return a.next=28,o["a"].likeReply({replyId:e});case 28:if(c=a.sent,l=c.data,"success"===l.status){a.next=32;break}throw new Error(l.message);case 32:t.data.totalLikes+=1,t.data.isLiked=1,u["a"].fire({icon:"success",title:l.message}),a.next=46;break;case 37:return a.next=39,o["a"].unlikeReply({replyId:e});case 39:if(d=a.sent,f=d.data,"success"===f.status){a.next=43;break}throw new Error(f.message);case 43:t.data.totalLikes-=1,t.data.isLiked=0,u["a"].fire({icon:"success",title:f.message});case 46:t.status.isProcessing=!1,t.$emit("after-toggle-like"),a.next=54;break;case 50:a.prev=50,a.t0=a["catch"](0),t.status.isProcessing=!1,u["a"].fire({icon:"error",title:a.t0.message});case 54:case"end":return a.stop()}}),a,null,[[0,50]])})))()},clickModalButton:function(e){this.$emit("after-click-modal",e)}}},d=l,f=(a("7fa8"),a("2877")),m=Object(f["a"])(d,n,r,!1,null,"630aa686",null);t["a"]=m.exports},"660d":function(e,t,a){e.exports=a.p+"img/cover.cd20228d.jpeg"},6783:function(e,t,a){"use strict";a("a4d3"),a("e01a");var n=a("2fa3");t["a"]={getTweets:function(){return n["b"].get("/tweets")},getUsersTweets:function(e){var t=e.userId;return n["b"].get("/users/".concat(t,"/tweets"))},getUserLikes:function(e){var t=e.userId;return n["b"].get("/users/".concat(t,"/likes"))},getTweet:function(e){var t=e.tweetId;return n["b"].get("/tweets/".concat(t))},getReply:function(e){var t=e.userId;return n["b"].get("/users/".concat(t,"/replied_tweets"))},createTweet:function(e){var t=e.User,a=e.description;return n["b"].post("/tweets",{User:t,description:a})},createReply:function(e){var t=e.tweetId,a=e.content;return n["b"].post("/tweets/".concat(t,"/replies"),{tweetId:t,content:a})},likeTweet:function(e){var t=e.tweetId;return n["b"].post("/tweets/".concat(t,"/like"),null)},unlikeTweet:function(e){var t=e.tweetId;return n["b"].post("/tweets/".concat(t,"/unlike"),null)},likeReply:function(e){var t=e.replyId;return n["b"].post("/replies/".concat(t,"/like"),null)},unlikeReply:function(e){var t=e.replyId;return n["b"].post("/replies/".concat(t,"/unlike"),null)},getAdminTweets:function(){return n["b"].get("/admin/main")},getAdminUsers:function(){return n["b"].get("/admin/users")},deleteTweet:function(e){var t=e.tweetId;return n["b"].delete("/admin/tweets/".concat(t))}}},"71e1":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADkSURBVHgB7ZTLDYMwEETHKEodboVOfEwXaYOjO6EVyohyCFkbR0H+jrlwYS4ge2ee1j/g0tlS8cBqoHGHwRtWWSwgVPMMSbUrBJ7ynb2RC5+Dx8TzKWCAlb4W+dMtyC5ce4/zRlJZ40MMqxhXH75I62PcehKupGZKlzQLaEHY8CqgBPETZHgTkIVsosIpQAYCNtxpAKOXo+yJYYxQe4niDd0AGoXT1QXInZYAmFmI6gn/rTlzT6oA5pyzEHUkvAdSeuy4SzSFffm/XSauuSUu92B9fG+WOeeuRjoZpQuTe+wuna8v2j6XRkPVLQEAAAAASUVORK5CYII="},7696:function(e,t,a){"use strict";var n=a("2fa3");t["a"]={signIn:function(e){var t=e.account,a=e.password;return n["b"].post("/users/signin",{account:t,password:a})},adminSignin:function(e){var t=e.account,a=e.password;return n["b"].post("/admin/signin",{account:t,password:a})},signUp:function(e){return n["b"].post("/users",e)},getCurrentUser:function(){return n["b"].get("/currentUser")}}},"7d7f":function(e,t,a){},"7fa8":function(e,t,a){"use strict";a("a075")},"811a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal fade",attrs:{id:"tweetReplyModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"btn close-btn p-0",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleCancel.apply(null,arguments)}}},[e._m(0)])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"container replyTarget"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e._f("emptyImage")(e.tweet.User.avatar),alt:""}})]),a("div",{staticClass:"tweetInfo"},[a("div",{staticClass:"userInfo"},[a("p",{staticClass:"userName"},[e._v(" "+e._s(e.tweet.User.name)+" ")]),a("p",{staticClass:"userAccount"},[e._v(" "+e._s(e.tweet.User.account)+" ")]),a("span",{staticClass:"mx-1"},[e._v("·")]),a("p",{staticClass:"tweetUpdateAt"},[e._v(" "+e._s(e._f("fromNow")(e.tweet.createdAt))+" ")])]),a("div",{staticClass:"tweetContent"},[a("p",[e._v(e._s(e.tweet.description))])]),a("div",{staticClass:"panel"},[a("p",[e._v(" 回覆給 "),a("span",[e._v(e._s(e.tweet.User.account)+" ")])])])])]),a("div",{staticClass:"container myReply"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e._f("emptyImage")(e.currentUser.avatar),alt:""}})]),a("div",{staticClass:"tweetInfo"},[a("div",{staticClass:"input"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyContent,expression:"replyContent"}],attrs:{id:"",name:"",cols:"55",rows:"5",autofocus:"",maxlength:"140",required:"",placeholder:"推你的回覆"},domProps:{value:e.replyContent},on:{input:function(t){t.target.composing||(e.replyContent=t.target.value)}}})])])])]),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"tweetButton"},[a("button",{staticClass:"btn",attrs:{type:"button",disabled:!e.replyContent||e.status.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.createReply(e.tweet.id)}}},[e._v(" 回覆 ")])])])])])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{attrs:{"aria-hidden":"true"}},[n("img",{staticClass:"close-image",attrs:{src:a("71e1"),alt:""}})])}],s=a("1da1"),i=a("5530"),c=(a("96cf"),a("498a"),a("2708")),o=a("2fa3"),u=a("6783"),l=a("2f62"),d={name:"TweetReplyModal",mixins:[c["b"],c["d"]],props:{targetTweet:{type:Object,default:function(){return{id:-1,User:{id:-1,account:"",name:"",avatar:""},description:"",totalLikes:0,totalReplies:0,createdAt:"",isLiked:!1,Replies:{}}}}},computed:Object(i["a"])({},Object(l["b"])(["currentUser"])),data:function(){return{replyContent:"",tweet:{id:-1,User:{id:-1,account:"",name:"",image:""},content:"",totalLikes:0,totalReplies:0,createdAt:"",isLiked:!1,Replies:{}},status:{isProcessing:!1}}},created:function(){this.fetchModalContent()},watch:{targetTweet:function(){this.fetchModalContent()}},methods:{createReply:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.status.isProcessing=!0,n=t.replyContent.trim(),n){a.next=8;break}return o["a"].fire({icon:"error",title:"尚未輸入推文內容！"}),t.replyContent="",t.status.isProcessing=!1,a.abrupt("return");case 8:if(!(n.length>140)){a.next=12;break}return o["a"].fire({icon:"error",title:"回覆字數不得超過 140 個字！"}),t.status.isProcessing=!1,a.abrupt("return");case 12:return a.next=14,u["a"].createReply({tweetId:e,content:n});case 14:if(r=a.sent,s=r.data,"success"===s.status){a.next=18;break}throw new Error(s.message);case 18:return t.$emit("after-create-reply",{id:s.message.id,content:t.replyContent,tweetId:e}),t.$emit("change-reply-count",t.tweet.id),t.replyContent="",o["a"].fire({icon:"success",title:"已完成回覆！"}),t.status.isProcessing=!1,a.abrupt("return");case 26:a.prev=26,a.t0=a["catch"](0),t.status.isProcessing=!1,o["a"].fire({icon:"error",title:"目前無法新增回應，請稍後再試"});case 30:case"end":return a.stop()}}),a,null,[[0,26]])})))()},fetchModalContent:function(){this.tweet=Object(i["a"])(Object(i["a"])({},this.tweet),this.targetTweet)},handleCancel:function(){this.replyContent=""}}},f=d,m=(a("a03a"),a("2877")),p=Object(m["a"])(f,n,r,!1,null,"29712540",null);t["a"]=p.exports},"8b48":function(e,t,a){},"8e0d":function(e,t,a){},"99d3":function(e,t,a){"use strict";a("7d7f")},a03a:function(e,t,a){"use strict";a("f03c")},a075:function(e,t,a){},ab4f:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav-top d-flex align-items-center border-bottom"},[a("div",{staticClass:"back"},[a("button",{staticClass:"btn back-button",class:{none:!e.show},attrs:{type:"button"},on:{click:function(t){return e.$router.back()}}},[e._v(" ← ")])]),a("div",{staticClass:"title ps-4"},[a("div",{staticClass:"page-name"},[e._v(e._s(e.msg))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.count>=0,expression:"count >= 0 "}],staticClass:"follows-count"},[e._v(" "+e._s(e.count)+" 推文 ")])])])},r=[],s=(a("a9e3"),{name:"TopNavBar",props:{msg:String,show:{type:Boolean,default:!1},totalTweets:{type:Number,required:!1}},watch:{totalTweets:function(e){this.count=e}},created:function(){this.fetchCount()},data:function(){return{count:null}},methods:{fetchCount:function(){this.count=this.totalTweets}}}),i=s,c=(a("cb5e"),a("2877")),o=Object(c["a"])(i,n,r,!1,null,"394b46a1",null);t["a"]=o.exports},bca0:function(e,t){e.exports="data:image/png;base64,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"},c747:function(e,t,a){"use strict";a("5620")},c8f4:function(e,t,a){},cb4e:function(e,t,a){"use strict";a("db9d")},cb5e:function(e,t,a){"use strict";a("e502")},db75:function(e,t,a){"use strict";a("08c7")},db9d:function(e,t,a){},e46d:function(e,t,a){"use strict";a("335f")},e502:function(e,t,a){},f03c:function(e,t,a){},f250:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",style:[e.more?{height:71*e.recTwitterer.length+92+"px"}:{height:"447px"}]},[e.isLoading?a("Spinner"):[a("div",{staticClass:"title"},[a("h1",[e._v("跟隨誰")])]),a("hr"),a("div",{staticClass:"users"},[a("ul",{staticClass:"usersList"},e._l(e.recTwitterer,(function(t,n){return a("li",{directives:[{name:"show",rawName:"v-show",value:!(!e.more&&n>4),expression:"!(!more && card > 4)"}],key:t.id,staticClass:"user"},[a("router-link",{attrs:{to:{name:"user-tweets",params:{id:t.id}}}},[a("div",{staticClass:"userContent"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e._f("emptyImage")(t.avatar),alt:""}})]),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[a("h2",{staticClass:"userName"},[e._v(e._s(t.name))])]),a("div",{staticClass:"account"},[a("h2",[e._v(e._s(t.account))])])]),a("div",{staticClass:"toggleFollow"},[t.isFollowing?a("button",{staticClass:"btn isFollowing",attrs:{disabled:t.isProcessing},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.unfollowUser(t.id)}}},[e._v(" 正在跟隨 ")]):a("button",{staticClass:"btn follow",attrs:{disabled:t.isProcessing},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.followUser(t.id)}}},[e._v(" 跟隨 ")])])]),a("hr")])],1)})),0)]),a("div",{staticClass:"showMore"},[a("button",{directives:[{name:"show",rawName:"v-show",value:!e.more,expression:"!more"}],staticClass:"btn",on:{click:function(t){e.more=!e.more}}},[e._v("顯示更多")]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.more,expression:"more"}],staticClass:"btn",on:{click:function(t){e.more=!e.more}}},[e._v("顯示更少")])])]],2)},r=[],s=a("5530"),i=a("1da1"),c=(a("96cf"),a("a9e3"),a("d81d"),a("2708")),o=a("4cce"),u=a("2fa3"),l=a("2375"),d={components:{Spinner:l["a"]},name:"RecFollowingsList",mixins:[c["b"]],props:{removeFollowId:{type:Number,default:0},addFollowId:{type:Number,default:0}},created:function(){this.fetchRecFollowers()},watch:{removeFollowId:{handler:function(e){this.recTwitterer.map((function(t){if(t.id!==e)return t;t.isFollowing=0}))}},addFollowId:{handler:function(e){this.recTwitterer.map((function(t){if(t.id!==e)return t;t.isFollowing=1}))}}},data:function(){return{recTwitterer:[],more:!1,isLoading:!0}},methods:{fetchRecFollowers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].getRecFollowers();case 3:a=t.sent,n=a.data,n.map((function(t){e.recTwitterer.push(Object(s["a"])(Object(s["a"])({},t),{},{isProcessing:!1}))})),e.isLoading=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),e.isLoading=!1,u["a"].fire({icon:"error",title:"無法取得推薦追蹤者資料，請稍後再試"});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},followUser:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.recTwitterer.map((function(t){t.id===e&&(t.isProcessing=!0)})),a.next=4,o["a"].followUser({userId:e});case 4:if(n=a.sent,r=n.data,"success"===r.status){a.next=8;break}throw new Error(r.message);case 8:t.recTwitterer=t.recTwitterer.map((function(t){return t.id!==e?t:Object(s["a"])(Object(s["a"])({},t),{},{totalFollowers:t.totalFollowers+1,isFollowing:1})})),t.$emit("after-add-follow",e),u["a"].fire({icon:"success",title:"追蹤成功！"}),t.recTwitterer.map((function(t){t.id===e&&(t.isProcessing=!1)})),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](0),t.recTwitterer.map((function(t){t.id===e&&(t.isProcessing=!1)})),u["a"].fire({icon:"error",title:"無法追蹤使用者，請稍後再試"});case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()},unfollowUser:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.recTwitterer.map((function(t){t.id===e&&(t.isProcessing=!0)})),a.next=4,o["a"].unfollowUser({userId:e});case 4:if(n=a.sent,r=n.data,"success"===r.status){a.next=8;break}throw new Error(r.message);case 8:t.recTwitterer=t.recTwitterer.map((function(t){return t.id!==e?t:Object(s["a"])(Object(s["a"])({},t),{},{totalFollowers:t.totalFollowers-1,isFollowing:0})})),t.$emit("after-delete-follow",e),u["a"].fire({icon:"success",title:"取消追蹤成功！"}),t.recTwitterer.map((function(t){t.id===e&&(t.isProcessing=!1)})),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](0),t.recTwitterer.map((function(t){t.id===e&&(t.isProcessing=!1)})),u["a"].fire({icon:"error",title:"無法取消追蹤使用者，請稍後再試"});case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()}}},f=d,m=(a("2d2c"),a("2877")),p=Object(m["a"])(f,n,r,!1,null,"273e2045",null);t["a"]=p.exports}});
//# sourceMappingURL=app.3e8a983c.js.map